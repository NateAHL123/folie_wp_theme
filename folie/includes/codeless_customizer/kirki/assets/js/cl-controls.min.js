/***************************
File generated by shrinker.ch
DateTime: 2017-04-13, 16:20:27
File list:
* dimension.js
* dropdown-pages.js
* generic.js
* multicheck.js
* inlineselect.js
* number.js
* multicolor.js
* palette.js
* preset.js
* radio.js
* radio-buttonset.js
* radio-image.js
* editor.js
* select.js
* slider.js
* sortable.js
* spacing.js
* switch.js
* toggle.js
* repeater.js
* checkbox.js
* code.js
* codelessheader.js
* typography.js
* color.js
* color-palette.js
* cssbox.js
* custom.js
* dashicons.js
* clelement.js
* date.js
*****************************/
wp.customize.controlConstructor["kirki-dimension"]=wp.customize.Control.extend({ready:function(){var a=this,b;false===kirkiValidateCSSValue(a.setting._value)?jQuery(a.selector+" .input-wrapper").addClass("invalid"):jQuery(a.selector+" .input-wrapper").removeClass("invalid");this.container.on("change keyup paste","input",function(){b=jQuery(this).val();if(false===kirkiValidateCSSValue(b))jQuery(a.selector+" .input-wrapper").addClass("invalid");else{jQuery(a.selector+" .input-wrapper").removeClass("invalid");
a.setting.set(b)}})}});wp.customize.controlConstructor["kirki-dropdown-pages"]=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find("select");jQuery(b).selectize();this.container.on("change","select",function(){a.setting.set(jQuery(this).val())})}});wp.customize.controlConstructor["kirki-generic"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("change keyup paste",a.params.choices.element,function(){a.setting.set(jQuery(this).val())})}});
wp.customize.controlConstructor["kirki-multicheck"]=wp.customize.Control.extend({ready:function(){var a=this;a.container.on("change","input",function(){var b=[],c=0;jQuery.each(a.params.choices,function(d){if(a.container.find('input[value="'+d+'"]').is(":checked")){b[c]=d;c++}});a.setting.set(b)})}});
wp.customize.controlConstructor["kirki-inlineselect"]=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find("select"),c=parseInt(b.data("multiple")),d;c>1?jQuery(b).selectize({maxItems:c,plugins:["remove_button","drag_drop"]}):jQuery(b).selectize();this.container.on("change","select",function(){d=jQuery(this).val();if(c>1)d=_.extend({},jQuery(this).val());a.setting.set(d)})}});
wp.customize.controlConstructor["kirki-number"]=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find("input"),c=-99999,d=99999,e=1;if("undefined"!==typeof a.params.choices&&"undefined"!==typeof a.params.choices.min)c=a.params.choices.min;if("undefined"!==typeof a.params.choices&&"undefined"!==typeof a.params.choices.max)d=a.params.choices.max;if("undefined"!==typeof a.params.choices&&"undefined"!==typeof a.params.choices.step){e=a.params.choices.step;if("any"===a.params.choices.step)e=
"0.001"}jQuery(b).spinner({min:c,max:d,step:e});this.container.on("change click keyup paste","input",function(){a.setting.set(jQuery(this).val())})}});
wp.customize.controlConstructor["kirki-multicolor"]=wp.customize.Control.extend({ready:function(){function a(g,k,n){var m=g.container.find(".multicolor-index-"+n);m.wpColorPicker({target:e[0],change:function(){setTimeout(function(){k[n]=m.val();g.setValue(k,false);g.container.find(".multicolor-index-"+n).trigger("change")},100)}})}var b=this.params.choices,c=Object.keys(b),d=this.params.value,e=this.container.find(".iris-target"),f=0,i,h;for(this.settingField=this.container.find("[data-customize-setting-link]").first();f<
Object.keys(b).length;){a(this,d,c[f]);i=this.container.find(".wp-picker-container .wp-picker-input-wrap");h=this.container.find(".wp-picker-container .wp-picker-holder");jQuery(i[0]).detach().appendTo(e[0]);jQuery(h[0]).detach().appendTo(e[0]);f++}},setValue:function(a,b){var c={};_.each(a,function(d,e){c[e]=d});this.setting.set(c);b&&this.settingField.trigger("change")}});
wp.customize.controlConstructor["kirki-palette"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("click","input",function(){a.setting.set(jQuery(this).val())})}});
wp.customize.controlConstructor["kirki-preset"]=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find("select"),c;jQuery(b).selectize();this.container.on("change","select",function(){c=jQuery(this).val();a.setting.set(c);jQuery.each(a.params.choices,function(d,e){c===d&&jQuery.each(e.settings,function(f,i){kirkiSetSettingValue(f,i)})});wp.customize.previewer.refresh()})}});
wp.customize.controlConstructor["kirki-radio"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("change","input",function(){a.setting.set(jQuery(this).val())})}});wp.customize.controlConstructor["kirki-radio-buttonset"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("click","input",function(){a.setting.set(jQuery(this).val())})}});
wp.customize.controlConstructor["kirki-radio-image"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("click","input",function(){a.setting.set(jQuery(this).val())})}});
wp.customize.controlConstructor["kirki-editor"]=wp.customize.Control.extend({ready:function(){var a=this,b=a.container.find("textarea"),c=a.container.find(".toggle-editor");jQuery("#kirki_editor_pane");var d=jQuery("#kirki_editor_pane textarea.wp-editor-area"),e,f;jQuery(window).load(function(){var i=tinyMCE.get("kirki-editor");c.html(window.kirki.l10n["open-editor"]);c.on("click",function(){a.toggleEditor();a.changeButton();a.setEditorContent(i)});i&&i.onChange.add(function(h){h.save();f=i.getContent();
clearTimeout(e);e=setTimeout(function(){b.val(f).trigger("change");wp.customize.instance(a.getEditorWrapperSetting()).set(f)},500)});d.on("change keyup paste",function(){wp.customize.instance(a.getEditorWrapperSetting()).set(jQuery(this).val())})})},changeButton:function(){jQuery("#kirki_editor_pane");jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n["switch-editor"]);if(false!==this.getEditorWrapperSetting()){jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n["switch-editor"]);
jQuery("#customize-control-"+this.getEditorWrapperSetting()+" .toggle-editor").html(window.kirki.l10n["close-editor"])}else jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n["open-editor"])},toggleEditor:function(){var a=jQuery("#kirki_editor_pane");if(!this.getEditorWrapperSetting()||this.id!==this.getEditorWrapperSetting()){a.removeClass();a.addClass(this.id)}else{a.removeClass();a.addClass("hidden")}},setEditorContent:function(a){jQuery("#kirki_editor_pane");a.setContent(this.setting._value)},
getEditorWrapperSetting:function(){if(jQuery("#kirki_editor_pane").hasClass("hidden"))return false;return jQuery("#kirki_editor_pane").attr("class")?jQuery("#kirki_editor_pane").attr("class"):false}});
wp.customize.controlConstructor["kirki-select"]=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find("select"),c=parseInt(b.data("multiple")),d;c>1?jQuery(b).selectize({maxItems:c,plugins:["remove_button","drag_drop"]}):jQuery(b).selectize();this.container.on("change","select",function(){d=jQuery(this).val();if(c>1)d=_.extend({},jQuery(this).val());a.setting.set(d)})}});
wp.customize.controlConstructor["kirki-slider"]=wp.customize.Control.extend({ready:function(){var a=this,b,c,d;this.container.on("change input","input[type=range]",function(){b=jQuery(this).attr("value");jQuery(this).closest("label").find(".kirki_range_value .value").text(b);a.setting.set(b)});jQuery(".kirki-slider-reset").click(function(){c=jQuery(this).closest("label").find("input");d=c.data("reset_value");c.val(d);c.change();jQuery(this).closest("label").find(".kirki_range_value .value").text(d)})}});
wp.customize.controlConstructor["kirki-sortable"]=wp.customize.Control.extend({ready:function(){var a=this;this.settingField=this.container.find("[data-customize-setting-link]").first();this.sortableContainer=this.container.find("ul.sortable").first();this.setValue(this.setting.get(),false);this.sortableContainer.sortable().disableSelection().on("sortstop",function(){a.sort()}).find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){a.sort()})},
sort:function(){var a=[];this.sortableContainer.find("li").each(function(){var b=jQuery(this);b.is(".invisible")||a.push(b.data("value"))});this.setValue(a,true)},getValue:function(){return unserialize(this.setting.get())},setValue:function(a,b){var c=serialize(a);this.setting.set(c);this.settingField.val(c);b&&this.settingField.trigger("change")}});
wp.customize.controlConstructor["kirki-spacing"]=wp.customize.Control.extend({ready:function(){var a=this,b={};_.each(["top","bottom","left","right"],function(c){if(a.container.has("."+c).size()){b[c]=a.setting._value[c];jQuery(a.selector+" ."+c+".input-wrapper").removeClass("invalid");false===kirkiValidateCSSValue(a.setting._value[c])&&jQuery(a.selector+" ."+c+".input-wrapper").addClass("invalid");a.container.on("change keyup paste","."+c+" input",function(){var d=jQuery(this).val();if(false===kirkiValidateCSSValue(d))jQuery(a.selector+
" ."+c+".input-wrapper").addClass("invalid");else{jQuery(a.selector+" ."+c+".input-wrapper").removeClass("invalid");b[c]=d;a.setting.set(b);wp.customize.previewer.refresh()}})}})}});wp.customize.controlConstructor["kirki-switch"]=wp.customize.Control.extend({ready:function(){var a=this,b=a.setting._value;this.container.on("change","input",function(){b=jQuery(this).is(":checked")?true:false;a.setting.set(b)})}});
wp.customize.controlConstructor["kirki-toggle"]=wp.customize.Control.extend({ready:function(){var a=this,b=a.setting._value;this.container.on("change","input",function(){b=jQuery(this).is(":checked")?true:false;a.setting.set(b)})}});
var RepeaterRow=function(a,b,c){var d=this;this.rowIndex=a;this.container=b;this.label=c;this.header=this.container.find(".repeater-row-header");this.header.on("click",function(){d.toggleMinimize()});this.container.on("click",".repeater-row-remove",function(){d.remove()});this.header.on("mousedown",function(){d.container.trigger("row:start-dragging")});this.container.on("keyup change","input, select, textarea",function(e){d.container.trigger("row:update",[d.rowIndex,jQuery(e.target).data("field"),
e.target])});this.setRowIndex=function(e){this.rowIndex=e;this.container.attr("data-row",e);this.container.data("row",e);this.updateLabel()};this.toggleMinimize=function(){this.container.toggleClass("minimized");this.header.find(".dashicons").toggleClass("dashicons-arrow-up").toggleClass("dashicons-arrow-down")};this.remove=function(){this.container.slideUp(300,function(){jQuery(this).detach()});this.container.trigger("row:remove",[this.rowIndex])};this.updateLabel=function(){var e;if("field"===this.label.type){e=
this.container.find('.repeater-field [data-field="'+this.label.field+'"]');if("function"===typeof e.val){e=e.val();if(""!==e){this.header.find(".repeater-row-label").text(e);return}}}this.header.find(".repeater-row-label").text(this.label.value+" "+(this.rowIndex+1))};this.updateLabel()};
wp.customize.controlConstructor.repeater=wp.customize.Control.extend({ready:function(){var a=this,b,c,d=this.params.value;this.settingField=this.container.find("[data-customize-setting-link]").first();this.setValue([],false);this.repeaterFieldsContainer=this.container.find(".repeater-fields").first();this.currentIndex=0;this.rows=[];b=false;if(undefined!==this.params.choices.limit)b=0>=this.params.choices.limit?false:parseInt(this.params.choices.limit);this.container.on("click","button.repeater-add",
function(e){e.preventDefault();if(!b||a.currentIndex<b){c=a.addRow();c.toggleMinimize();a.initColorPicker();a.initDropdownPages(c)}else jQuery(a.selector+" .limit").addClass("highlight")});this.container.on("click",".repeater-row-remove",function(){a.currentIndex--;if(!b||a.currentIndex<b)jQuery(a.selector+" .limit").removeClass("highlight")});this.container.on("click keypress",".repeater-field-image .upload-button,.repeater-field-cropped_image .upload-button,.repeater-field-upload .upload-button",
function(e){e.preventDefault();a.$thisButton=jQuery(this);a.openFrame(e)});this.container.on("click keypress",".repeater-field-image .remove-button,.repeater-field-cropped_image .remove-button",function(e){e.preventDefault();a.$thisButton=jQuery(this);a.removeImage(e)});this.container.on("click keypress",".repeater-field-upload .remove-button",function(e){e.preventDefault();a.$thisButton=jQuery(this);a.removeFile(e)});this.repeaterTemplate=_.memoize(function(){var e,f={evaluate:/<#([\s\S]+?)#>/g,
interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(i){e=_.template(a.container.find(".customize-control-repeater-content").first().html(),null,f);return e(i)}});d.length&&_.each(d,function(e){c=a.addRow(e);a.initColorPicker();a.initDropdownPages(c,e)});this.setValue(d,true,true);this.repeaterFieldsContainer.sortable({handle:".repeater-row-header",update:function(){a.sort()}})},openFrame:function(a){if(!wp.customize.utils.isKeydownButNotEnterEvent(a)){this.$thisButton.closest(".repeater-field").hasClass("repeater-field-cropped_image")?
this.initCropperFrame():this.initFrame();this.frame.open()}},initFrame:function(){var a=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:a}),multiple:false,date:false})]});this.frame.on("select",this.onSelect,this)},initCropperFrame:function(){var a=this.$thisButton.siblings("input.hidden-field").attr("data-field"),b=["width","height","flex_width","flex_height"],c=this.getMimeType();"string"===typeof a&&""!==a&&"object"===typeof this.params.fields[a]&&
"cropped_image"===this.params.fields[a].type&&b.forEach(function(d){if("undefined"!==typeof this.params.fields[a][d])this.params[d]=this.params.fields[a][d]}.bind(this));this.frame=wp.media({button:{text:"Select and Crop",close:false},states:[new wp.media.controller.Library({library:wp.media.query({type:c}),multiple:false,date:false,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,
control:this})]});this.frame.on("select",this.onSelectForCrop,this);this.frame.on("cropped",this.onCropped,this);this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){var a=this.frame.state().get("selection").first().toJSON();this.$thisButton.closest(".repeater-field").hasClass("repeater-field-upload")?this.setFileInRepeaterField(a):this.setImageInRepeaterField(a)},onSelectForCrop:function(){var a=this.frame.state().get("selection").first().toJSON();this.params.width===a.width&&
this.params.height===a.height&&!this.params.flex_width&&!this.params.flex_height?this.setImageInRepeaterField(a):this.frame.setState("cropper")},onCropped:function(a){this.setImageInRepeaterField(a)},calculateImageSelectOptions:function(a,b){var c=b.get("control"),d=!!parseInt(c.params.flex_width,10),e=!!parseInt(c.params.flex_height,10),f=a.get("width"),i=a.get("height"),h=parseInt(c.params.width,10),g=parseInt(c.params.height,10),k=h/g;b.set("canSkipCrop",!c.mustBeCropped(d,e,h,g,f,i));if(f/i>k){g=
i;h=g*k}else{h=f;g=h/k}c=(f-h)/2;k=(i-g)/2;f={handles:true,keys:true,instance:true,persistent:true,imageWidth:f,imageHeight:i,x1:c,y1:k,x2:h+c,y2:g+k};if(false===e&&false===d)f.aspectRatio=h+":"+g;if(false===e)f.maxHeight=g;if(false===d)f.maxWidth=h;return f},mustBeCropped:function(a,b,c,d,e,f){if(true===a&&true===b)return false;if(true===a&&d===f)return false;if(true===b&&c===e)return false;if(c===e&&d===f)return false;if(e<=c)return false;return true},onSkippedCrop:function(){this.setImageInRepeaterField(this.frame.state().get("selection").first().toJSON())},
setImageInRepeaterField:function(a){var b=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image");b.find(".kirki-image-attachment").html('<img src="'+a.url+'">').hide().slideDown("slow");b.find(".hidden-field").val(a.id);this.$thisButton.text(this.$thisButton.data("alt-label"));b.find(".remove-button").show();b.find("input, textarea, select").trigger("change");this.frame.close()},setFileInRepeaterField:function(a){var b=this.$thisButton.closest(".repeater-field-upload");b.find(".kirki-file-attachment").html('<span class="file"><span class="dashicons dashicons-media-default"></span> '+
a.filename+"</span>").hide().slideDown("slow");b.find(".hidden-field").val(a.id);this.$thisButton.text(this.$thisButton.data("alt-label"));b.find(".upload-button").show();b.find(".remove-button").show();b.find("input, textarea, select").trigger("change");this.frame.close()},getMimeType:function(){var a=this.$thisButton.siblings("input.hidden-field").attr("data-field");if("string"===typeof a&&""!==a)if("object"===typeof this.params.fields[a]&&"upload"===this.params.fields[a].type)if("undefined"!==
typeof this.params.fields[a].mime_type)return this.params.fields[a].mime_type;return"image"},removeImage:function(a){var b;if(!wp.customize.utils.isKeydownButNotEnterEvent(a)){a=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image,.repeater-field-upload");b=a.find(".upload-button");a.find(".kirki-image-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))});a.find(".hidden-field").val("");b.text(b.data("label"));this.$thisButton.hide();
a.find("input, textarea, select").trigger("change")}},removeFile:function(a){var b;if(!wp.customize.utils.isKeydownButNotEnterEvent(a)){a=this.$thisButton.closest(".repeater-field-upload");b=a.find(".upload-button");a.find(".kirki-file-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))});a.find(".hidden-field").val("");b.text(b.data("label"));this.$thisButton.hide();a.find("input, textarea, select").trigger("change")}},getValue:function(){return JSON.parse(decodeURI(this.setting.get()))},
setValue:function(a,b,c){var d=[];if(c){jQuery.each(this.params.fields,function(e,f){if("image"===f.type||"cropped_image"===f.type||"upload"===f.type)d.push(e)});jQuery.each(a,function(e,f){jQuery.each(d,function(i,h){if("undefined"!==typeof f[h]&&"undefined"!==typeof f[h].id)a[e][h]=f[h].id})})}this.setting.set(encodeURI(JSON.stringify(a)));b&&this.settingField.trigger("change")},addRow:function(a){var b=this,c=b.repeaterTemplate(),d=this.getValue(),e={},f,i,h;if(c){f=jQuery.extend(true,{},b.params.fields);
if(a)for(h in a)if(a.hasOwnProperty(h)&&f.hasOwnProperty(h))f[h]["default"]=a[h];f.index=this.currentIndex;c=c(f);i=new RepeaterRow(b.currentIndex,jQuery(c).appendTo(b.repeaterFieldsContainer),b.params.row_label);i.container.on("row:remove",function(g,k){b.deleteRow(k)});i.container.on("row:update",function(g,k,n,m){b.updateField.call(b,g,k,n,m);i.updateLabel()});this.rows[this.currentIndex]=i;for(h in f)if(f.hasOwnProperty(h))e[h]=f[h]["default"];d[this.currentIndex]=e;this.setValue(d,true);this.currentIndex++;
return i}},sort:function(){var a=this,b=this.repeaterFieldsContainer.find(".repeater-row"),c=[],d=a.getValue(),e=[],f=[];b.each(function(i,h){c.push(jQuery(h).data("row"))});jQuery.each(c,function(i,h){e[i]=a.rows[h];e[i].setRowIndex(i);f[i]=d[h]});a.rows=e;a.setValue(f)},deleteRow:function(a){var b=this.getValue(),c;if(b[a])if(this.rows[a]){delete b[a];delete this.rows[a];this.setValue(b,true)}a=1;for(c in this.rows)if(this.rows.hasOwnProperty(c)&&this.rows[c]){this.rows[c].updateLabel();a++}},updateField:function(a,
b,c,d){var e;if(this.rows[b])if(this.params.fields[c]){a=this.params.fields[c].type;b=this.rows[b];e=this.getValue();d=jQuery(d);if(undefined!==typeof e[b.rowIndex][c]){e[b.rowIndex][c]="checkbox"===a?d.is(":checked"):d.val();this.setValue(e,true)}}},initColorPicker:function(){var a=this,b=a.container.find(".color-picker-hex"),c={},d=b.data("field");if("undefined"!==typeof d&&"undefined"!==typeof a.params.fields[d]&&"undefined"!==typeof a.params.fields[d].palettes&&"object"===typeof a.params.fields[d].palettes)c.palettes=
a.params.fields[d].palettes;c.change=function(e,f){var i=jQuery(e.target),h=i.closest(".repeater-row").data("row"),g=a.getValue();g[h][i.data("field")]=f.color.toString();a.setValue(g,true)};0!==b.length&&b.wpColorPicker(c)},initDropdownPages:function(a,b){var c=this,d=a.container.find(".repeater-dropdown-pages select"),e;if(0!==d.length){e=jQuery(d).selectize()[0].selectize;d=d.data("field");b&&e.setValue(b[d]);this.container.on("change",".repeater-dropdown-pages select",function(f){f=jQuery(f.target);
var i=f.closest(".repeater-row").data("row"),h=c.getValue();h[i][f.data("field")]=jQuery(this).val();c.setValue(h)})}}});wp.customize.controlConstructor["kirki-checkbox"]=wp.customize.Control.extend({ready:function(){var a=this,b=a.setting._value;this.container.on("change","input",function(){b=jQuery(this).is(":checked")?true:false;a.setting.set(b)})}});
wp.customize.controlConstructor["kirki-code"]=wp.customize.Control.extend({ready:function(){var a=this,b=a.container.find(".kirki-codemirror-editor"),c=a.params.choices.language,d=a.container.find("a.edit"),e=a.container.find("a.close"),f;if("html"===a.params.choices.language)c={name:"htmlmixed"};d.on("click",function(){b.removeClass("collapsed").addClass("expanded")});e.on("click",function(){b.removeClass("expanded").addClass("collapsed")});f=CodeMirror.fromTextArea(b[0],{value:a.setting._value,
mode:c,lineNumbers:true,theme:a.params.choices.theme,height:a.params.choices.height+"px"});f.on("change",function(){a.setting.set(f.getValue())});b.parents(".accordion-section").on("click",function(){f.refresh()})}});wp.customize.controlConstructor["kirki-codelessheader"]=wp.customize.Control.extend({ready:function(){},setValue:function(a){this.setting.set(a)},dropped:function(a){this.setValue(a,false)}});
wp.customize.controlConstructor["kirki-typography"]=wp.customize.Control.extend({ready:function(){var a=this,b=a.selector+" .font-family select",c=a.selector+" .variant select",d=a.selector+" .subsets select",e=a.selector+" .text-transform select",f=false,i=false,h,g={},k,n;_.each(a.params["default"],function(m,j){if(false!==m){g[j]=m;if(undefined!==a.setting._value[j])g[j]=a.setting._value[j]}});_.each(a.setting._value,function(m,j){if(undefined===g[j]||"undefined"===typeof g[j])g[j]=m});k=function(m,
j,q){var s="variant"===j?c:d,t=false,o={},r;undefined!==jQuery(s).selectize()[0]&&jQuery(s).selectize()[0].selectize.destroy();if(_.isUndefined(m)||m=="")if("variant"===j)o=defaultVariants;_.each(kirkiAllFonts,function(l){if(m===l.family){if(undefined!==l.isStandard&&true===l.isStandard)t=true;if("variant"===j)o=l.variants;else if("subsets"===j)o=l.subsets}});if(false===t||"subsets"!==j){if(null===q){if("variant"===j)_.each(o,function(l){if(undefined!==l.id)h=g.variant;else if("regular"===l.id)f=
true;else if(false===i)i=l.id});else if("subsets"===j){r={};_.each(o,function(l){null!==g.subsets&&_.each(g.subsets,function(p){if(undefined!==l&&p===l.id)r[p]=p})});if(0!==r.length)h=q=jQuery.map(r,function(l){return[l]})}q=undefined!==h?h:false!==f?"regular":i}jQuery(s).selectize({maxItems:"variant"===j?1:null,valueField:"id",labelField:"label",searchField:["label"],options:o,items:"variant"===j?[q]:q,create:false,plugins:"variant"===j?"":["remove_button"],render:{item:function(l,p){return"<div>"+
p(l.label)+"</div>"},option:function(l,p){return"<div>"+p(l.label)+"</div>"}}}).data("selectize")}if(true===t)a.container.find(".hide-on-standard-fonts").css("display","none");else 2>o.length?a.container.find(".kirki-"+j+"-wrapper").css("display","none"):a.container.find(".kirki-"+j+"-wrapper").css("display","block")};jQuery(b).selectize({options:kirkiAllFonts,items:[a.setting._value["font-family"]],persist:false,maxItems:1,valueField:"family",labelField:"label",searchField:["family","label","subsets"],
create:false,render:{item:function(m,j){return"<div>"+j(m.label)+"</div>"},option:function(m,j){return"<div>"+j(m.label)+"</div>"}}});k(g["font-family"],"variant",g.variant);k(g["font-family"],"subsets",g.subsets);this.container.on("change",".font-family select",function(){g["font-family"]=jQuery(this).val();a.saveValue(g);k(jQuery(this).val(),"variant",null);k(jQuery(this).val(),"subsets",null)});this.container.on("change",".variant select",function(){g.variant=jQuery(this).val();a.saveValue(g)});
this.container.on("change",".subsets select",function(){g.subsets=jQuery(this).val();a.saveValue(g)});this.container.on("change keyup paste",".font-size input",function(){g["font-size"]=jQuery(this).val();a.saveValue(g)});this.container.on("change keyup paste",".line-height input",function(){g["line-height"]=jQuery(this).val();a.saveValue(g)});this.container.on("change keyup paste",".letter-spacing input",function(){g["letter-spacing"]=jQuery(this).val();a.saveValue(g)});this.container.on("change",
".text-align input",function(){g["text-align"]=jQuery(this).val();a.saveValue(g)});jQuery(e).selectize();this.container.on("change",".text-transform select",function(){g["text-transform"]=jQuery(this).val();a.saveValue(g)});n=this.container.find(".kirki-color-control");n.wpColorPicker({change:function(){setTimeout(function(){g.color=n.val();a.saveValue(g)},100)}})},saveValue:function(a){var b={};_.each(a,function(c,d){b[d]=c});this.setting.set(b)}});
wp.customize.controlConstructor["kirki-color"]=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find(".kirki-color-control");undefined!==a.params.choices&&b.wpColorPicker(a.params.choices);b.wpColorPicker({change:function(){setTimeout(function(){a.setting.set(b.val())},100)}})}});wp.customize.controlConstructor["kirki-color-palette"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("click","input",function(){a.setting.set(jQuery(this).val())})}});
wp.customize.controlConstructor["kirki-cssbox"]=wp.customize.Control.extend({ready:function(){var a=this;a.container.on("input keyup","input",function(){var b=_.isObject(a.setting.get())?a.setting.get():JSON.parse(a.setting.get()),c=jQuery(this).data("name"),d=jQuery(this).val();if(false===kirkiValidateCSSValue(d)&&d!="")jQuery(this).addClass("invalid");else{_.isObject(b)||(b={});jQuery(this).removeClass("invalid");b[c]=d;a.setting.set(JSON.stringify(b))}})}});
wp.customize.controlConstructor["kirki-custom"]=wp.customize.Control.extend({ready:function(){}});wp.customize.controlConstructor["kirki-dashicons"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("click","input",function(){a.setting.set(jQuery(this).val())})}});
wp.customize.controlConstructor["kirki-date"]=wp.customize.Control.extend({ready:function(){var a=this;jQuery(a.selector+" input.datepicker").datepicker();this.container.on("change keyup paste","input.datepicker",function(){a.setting.set(jQuery(this).val())})}});
